#!/usr/bin/env python
# -*- coding: utf-8 -*-
#
# $Id: sdss4install 70491 2016-06-15 19:16:07Z joelbrownstein $
#
from sdss4tools import __version__
from sdss4tools.install import Install

install = Install()
install.set_options()

if install.options and install.options.version: print(__version__)
else:

    install.set_logger()
    install.set_ready()
    install.set_product()
    install.set_directory()
    install.set_directory_install()
    install.set_directory_work()

    if not install.options.module_only:
        install.clean_directory_install()
        install.set_svncommand()
        install.set_exists()
        install.fetch()

    install.reset_options_from_config()
    install.set_build_type()
    if not install.options.module_only:
        install.logger_build_message()
        install.make_directory_install()

    if install.ready:
        install.set_modules()
        install.modules.set_ready()
        install.modules.set_file()
        install.modules.load_dependencies()
        install.modules.set_keywords()
        install.modules.set_directory()
        install.modules.build()

    install.set_environ()
    if not install.options.module_only:
        install.build()
        install.build_documentation()
        install.build_package()
        if not install.options.keep: install.clean()

    install.finalize()
